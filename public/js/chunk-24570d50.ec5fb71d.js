(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24570d50"],{"0479":function(e,t,r){"use strict";var o=r("3a9e"),a=r.n(o);a.a},"3a9e":function(e,t,r){},"4bad":function(e,t,r){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var o=r("1d80"),a=r("5899"),n="["+a+"]",c=RegExp("^"+n+n+"*"),i=RegExp(n+n+"*$"),s=function(e){return function(t){var r=String(o(t));return 1&e&&(r=r.replace(c,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:s(1),end:s(2),trim:s(3)}},7156:function(e,t,r){var o=r("861d"),a=r("d2bb");e.exports=function(e,t,r){var n,c;return a&&"function"==typeof(n=t.constructor)&&n!==r&&o(c=n.prototype)&&c!==r.prototype&&a(e,c),e}},"9fef":function(e,t,r){"use strict";var o=r("4bad"),a=r.n(o);a.a},a9e3:function(e,t,r){"use strict";var o=r("83ab"),a=r("da84"),n=r("94ca"),c=r("6eeb"),i=r("5135"),s=r("c6b6"),u=r("7156"),l=r("c04e"),m=r("d039"),f=r("7c73"),p=r("241c").f,b=r("06cf").f,d=r("9bf2").f,g=r("58a8").trim,v="Number",h=a[v],y=h.prototype,k=s(f(y))==v,C=function(e){var t,r,o,a,n,c,i,s,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+u}for(n=u.slice(2),c=n.length,i=0;i<c;i++)if(s=n.charCodeAt(i),s<48||s>a)return NaN;return parseInt(n,o)}return+u};if(n(v,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var w,x=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof x&&(k?m((function(){y.valueOf.call(r)})):s(r)!=v)?u(new h(C(t)),r,x):C(t)},P=o?p(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;P.length>_;_++)i(h,w=P[_])&&!i(x,w)&&d(x,w,b(h,w));x.prototype=y,y.constructor=x,c(a,v,x)}},b0c0:function(e,t,r){var o=r("83ab"),a=r("9bf2").f,n=Function.prototype,c=n.toString,i=/^\s*function ([^ (]*)/,s="name";o&&!(s in n)&&a(n,s,{configurable:!0,get:function(){try{return c.call(this).match(i)[1]}catch(e){return""}}})},d416:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"products"},[r("b-nav",{attrs:{tabs:""}},[r("b-nav-item",{on:{click:function(t){return e.setForm("Productos")}}},[e._v("Productos")]),r("b-nav-item",{on:{click:function(t){return e.setForm("Crear Producto")}}},[e._v("Crear Producto")]),r("b-nav-item",{on:{click:function(t){return e.setForm("Crear Categoria")}}},[e._v("Crear Categoria")])],1),r("div",{staticClass:"products__form"},["Productos"===e.title?r("product-list"):e._e(),"Crear Producto"===e.title?r("item-form"):e._e(),"Crear Categoria"===e.title?r("category-form"):e._e()],1)],1)},a=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"form"},[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("b-form-group",{attrs:{label:"Número de referencia"}},[r("b-form-input",{attrs:{required:""},model:{value:e.form.referenceNumberCommon,callback:function(t){e.$set(e.form,"referenceNumberCommon",t)},expression:"form.referenceNumberCommon"}})],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Proveedor"}},[r("b-form-input",{attrs:{required:""},model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Fecha de compra"}},[r("b-form-datepicker",{attrs:{required:""},model:{value:e.form.buyDate,callback:function(t){e.$set(e.form,"buyDate",t)},expression:"form.buyDate"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Tempoarada"}},[r("b-form-input",{attrs:{required:""},model:{value:e.form.season,callback:function(t){e.$set(e.form,"season",t)},expression:"form.season"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Nombre del producto"}},[r("b-form-input",{attrs:{required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Precio de compra"}},[r("b-form-input",{attrs:{type:"number",required:""},model:{value:e.form.purchasePrice,callback:function(t){e.$set(e.form,"purchasePrice",t)},expression:"form.purchasePrice"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Precio de venta"}},[r("b-form-input",{attrs:{type:"number",required:""},model:{value:e.form.salePrice,callback:function(t){e.$set(e.form,"salePrice",t)},expression:"form.salePrice"}},[e._v(e._s(e.calculateDiscount))])],1)],1)],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"En promocion"}},[r("b-form-checkbox",{attrs:{name:"promotionOn"},model:{value:e.form.promotionOn,callback:function(t){e.$set(e.form,"promotionOn",t)},expression:"form.promotionOn"}})],1)],1),r("b-col",[e.form.promotionOn?r("b-form-group",{attrs:{label:"Porcentaje"}},[r("b-form-input",{attrs:{disabled:!e.form.promotionOn,type:"number",required:""},model:{value:e.form.percentage,callback:function(t){e.$set(e.form,"percentage",t)},expression:"form.percentage"}})],1):e._e()],1),r("b-col",[e.form.promotionOn?r("b-form-group",{attrs:{label:"Precio con porcentaje aplicado"}},[r("b-form-input",{attrs:{disabled:"",type:"number"},model:{value:e.form.priceWithDiscount,callback:function(t){e.$set(e.form,"priceWithDiscount",t)},expression:"form.priceWithDiscount"}})],1):e._e()],1)],1),r("b-form-group",{attrs:{label:"Descripcion"}},[r("b-form-textarea",{model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),r("b-form-group",{attrs:{label:"Categoria"}},[r("b-form-select",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categories,(function(t){return r("b-form-select-option",{key:t.name,attrs:{value:t._id}},[e._v(e._s(t.name))])})),1)],1),r("b-row",[r("b-col",[r("b-form-group",{attrs:{label:"Accesorio"}},[r("b-form-checkbox",{attrs:{name:"Accesorio"},model:{value:e.form.accesory,callback:function(t){e.$set(e.form,"accesory",t)},expression:"form.accesory"}})],1)],1),r("b-col",[e.form.accesory?r("b-form-group",{attrs:{label:"Total accesorios"}},[r("b-form-input",{attrs:{type:"number"},model:{value:e.form.totalStock,callback:function(t){e.$set(e.form,"totalStock",t)},expression:"form.totalStock"}})],1):e._e()],1)],1),e.form.accesory?e._e():r("div",{staticClass:"form__stock"},[r("b-form-group",{attrs:{label:"Stock"}},[r("hr"),e._l(e.form.stock,(function(t,o){return r("b-row",{key:o},[r("b-button",{staticClass:"mt-3",attrs:{variant:"link"},on:{click:function(t){return e.removeItem(o)}}},[r("i",{staticClass:"fas fa-minus"})]),r("b-button",{staticClass:"mt-3",attrs:{variant:"link"},on:{click:function(t){return e.addItem()}}},[r("i",{staticClass:"fas fa-plus"})]),r("b-col",[r("b-form-group",{attrs:{label:"Referencia"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{placeholder:t.ref},model:{value:t.ref,callback:function(r){e.$set(t,"ref",r)},expression:"item.ref"}})],1),r("b-col",[r("b-form-group",{attrs:{label:"Color"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{placeholder:t.color},model:{value:t.color,callback:function(r){e.$set(t,"color",r)},expression:"item.color"}})],1),r("b-col",e._l(t.quantity,(function(t,a){return r("b-row",{key:a,staticClass:"mt-3"},[r("b-col",[r("b-form-group",{attrs:{label:"Talla"}},[r("b-input",{model:{value:t.size,callback:function(r){e.$set(t,"size",r)},expression:"units.size"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Cantidad"}},[r("b-input",{attrs:{type:"number"},model:{value:t.units,callback:function(r){e.$set(t,"units",r)},expression:"units.units"}})],1)],1),r("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.addQuantity(o)}}},[r("i",{staticClass:"fas fa-plus"})]),r("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.removeQuantity(o)}}},[r("i",{staticClass:"fas fa-minus"})])],1)})),1)],1)}))],2)],1),r("b-form-group",{attrs:{label:"Imagen"}},[r("b-form-file",{attrs:{required:"",type:"file",accept:"image/jpeg, image/png"},model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}})],1),r("br"),r("b-overlay",{attrs:{show:e.loading,opacity:"0.6",rouded:""}},[r("b-button",{attrs:{block:"",variant:"outline-primary",type:"submit"}},[e._v("Crear")])],1)],1)],1)},c=[],i=(r("a4d3"),r("e01a"),r("4160"),r("a434"),r("b0c0"),r("a9e3"),r("159b"),r("96cf"),r("1da1")),s=r("5530"),u=r("bc3a"),l=r.n(u),m=r("2f62"),f={name:"ItemForm",data:function(){return{loading:!1,form:{provider:"",buyDate:"",season:"",name:"",purchasePrice:0,salePrice:0,percentage:0,promotionOn:!1,referenceNumberCommon:"",description:"",totalStock:0,stock:[{ref:"",color:"",quantity:[{size:"",units:0}]}],accesory:!1,category:"",img:null,priceWithDiscount:0}}},computed:Object(s["a"])({},Object(m["c"])(["categories"]),{calculateDiscount:function(){if(this.form.promotionOn){var e=this.form.salePrice*(this.form.percentage/100);return this.form.priceWithDiscount=this.form.salePrice-e,this.form.priceWithDiscount}}}),methods:Object(s["a"])({},Object(m["b"])(["getCategories"]),{onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.form.accesory||e.form.stock.forEach((function(t){t.quantity.forEach((function(t){e.form.totalStock+=Number(t.units)}))})),r=new FormData,r.append("provider",e.form.provider),r.append("buyDate",e.form.buyDate),r.append("season",e.form.season),r.append("name",e.form.name),r.append("purchasePrice",e.form.purchasePrice),r.append("salePrice",0===e.form.priceWithDiscount?e.form.salePrice:e.form.priceWithDiscount),r.append("percentage",e.form.percentage),r.append("promotionOn",e.form.promotionOn),r.append("referenceNumberCommon",e.form.referenceNumberCommon),r.append("description",e.form.description),r.append("stock",JSON.stringify(e.form.stock)||[]),r.append("accesory",e.form.accesory),r.append("totalStock",e.form.totalStock),r.append("category",e.form.category),r.append("img",e.form.img),t.prev=17,e.loading=!0,t.next=21,l.a.post("".concat("https://www.macalola.com","/product"),r,{headers:{"content-type":"multipart/form-data",authorization:sessionStorage.getItem("adminToken")}});case 21:e.$bvToast.toast("OK:)",{title:"Producto creado",variant:"success",solid:!0}),e.form.provider="",e.form.buyDate="",e.form.season="",e.form.name="",e.form.purchasePrice=0,e.form.salePrice=0,e.form.percentage=0,e.form.promotionOn=!1,e.form.referenceNumberCommon="",e.form.description="",e.form.stock=0,e.form.accesory=!1,e.form.totalStock=[{ref:"",color:"",quantity:[{size:"",units:0}]}],e.form.category="",e.form.img=null,t.next=43;break;case 39:t.prev=39,t.t0=t["catch"](17),e.$bvToast.toast("Error",{title:"No se pudo crear el producto",variant:"danger",solid:!0}),console.log(t.t0);case 43:return t.prev=43,e.loading=!1,t.finish(43);case 46:case"end":return t.stop()}}),t,null,[[17,39,43,46]])})))()},addQuantity:function(e){this.form.stock[e].quantity.push({size:"",units:0})},removeQuantity:function(e){1!==this.form.stock[e].quantity.length&&this.form.stock[e].quantity.splice(e,1)},removeItem:function(e){1!==this.form.stock.length&&this.form.stock.splice(e,1)},addItem:function(){this.form.stock.push({ref:"",color:"",quantity:[{size:"",units:0}]})}}),created:function(){this.getCategories()}},p=f,b=r("2877"),d=Object(b["a"])(p,n,c,!1,null,null,null),g=d.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"category"},[r("b-row",[r("b-col",[r("b-form-group",{staticClass:"mr-3",attrs:{label:"Nombre"}},[r("b-form-input",{attrs:{required:""},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}})],1)],1),r("b-col",[r("b-form-group",{attrs:{label:"Referencia"}},[r("b-form-input",{attrs:{type:"number",required:""},model:{value:e.category.referenceNumber,callback:function(t){e.$set(e.category,"referenceNumber",t)},expression:"category.referenceNumber"}})],1)],1),r("div",{staticClass:"category__add"},[r("b-button",{attrs:{variant:"primary"},on:{click:e.postCategory}},[e._v("Añadir")])],1)],1),r("b-row",[r("b-col",[r("b-list-group",e._l(e.categories,(function(t,o){return r("b-list-group-item",{key:o},[r("span",[e._v(e._s(t.name)+" "+e._s(t.referenceNumber))]),r("b-button",{attrs:{variant:"link"},on:{click:function(t){return e.removeCategory(o)}}},[r("i",{staticClass:"fas fa-minus"})])],1)})),1)],1)],1)],1)},h=[],y=(r("99af"),{name:"CategoryForm",data:function(){return{category:{name:"",referenceNumber:""}}},methods:Object(s["a"])({},Object(m["b"])(["getCategories"]),{postCategory:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=sessionStorage.getItem("adminToken"),t.next=4,l.a.post("".concat("https://www.macalola.com","/category"),e.category,{headers:{authorization:r}});case 4:return e.category.name="",e.category.referenceNumber="",t.next=8,e.getCategories();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$bvToast.toast("Error",{title:"No se pudo crear la categoria",variant:"danger",solid:!0});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},removeCategory:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var o,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,o=sessionStorage.getItem("adminToken"),a=t.categories[e]._id,r.next=5,l.a.delete("".concat("https://www.macalola.com","/category/").concat(a),{headers:{authorization:o}});case 5:return r.next=7,t.getCategories();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.$bvToast.toast("Error",{title:"No se pudo borrar la categoria",variant:"danger",solid:!0});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}),computed:Object(s["a"])({},Object(m["c"])(["categories"])),created:function(){this.getCategories()}}),k=y,C=(r("9fef"),Object(b["a"])(k,v,h,!1,null,"786a8b9a",null)),w=C.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-overlay",{attrs:{show:e.loading,opacity:"0.6",rouded:""}},[r("section",[r("b-table",{attrs:{id:"table",striped:"",hover:"",items:e.producst,fields:e.fields,"tbody-tr-class":e.rowClass},on:{"row-clicked":e.getSingleItem}}),r("b-pagination",{attrs:{"per-page":e.perPage,"aria-controls":"table","total-rows":e.rows},on:{change:e.changePage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])},P=[],_={name:"ProductList",data:function(){return{loading:!1,currentPage:1,perPage:19,fields:[{key:"name",label:"Nombre"},{key:"referenceNumberCommon",label:"Nº Referencia"},{key:"accesory",label:"Accesorio",sortable:!0,formatter:function(e){return e?"Si":"No"}},{key:"category",label:"Categoria",sortable:!0,formatter:function(e){return e.name}},{key:"totalStock",label:"Stock",sortable:!0}]}},computed:Object(s["a"])({},Object(m["c"])(["producst"]),{rows:function(){return this.producst.length}}),methods:Object(s["a"])({},Object(m["b"])(["getAllProducts"]),{changePage:function(e){this.currentPage=20*(e-1)},rowClass:function(e,t){if(e&&"row"===t)return 0===e.totalStock?"table-danger":void 0},getSingleItem:function(e){this.loading=!0,this.$router.push({path:"/administration/product/".concat(e.referenceNumberCommon,"?from=").concat(this.currentPage)}),this.loading=!1}}),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.getAllProducts();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),e.$bvToast.toast("Error",{title:"Error al cargar los productos",variant:"danger",solid:!0});case 9:return t.prev=9,e.loading=!1,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})))()}},N=_,O=Object(b["a"])(N,x,P,!1,null,null,null),S=O.exports,$={components:{ItemForm:g,CategoryForm:w,ProductList:S},data:function(){return{title:"Productos"}},methods:{setForm:function(e){switch(e){case"Productos":this.title=e;break;case"Crear Producto":this.title=e;break;case"Crear Categoria":this.title=e;break;default:this.title="Productos"}}}},I=$,E=(r("0479"),Object(b["a"])(I,o,a,!1,null,"e3ceec24",null));t["default"]=E.exports},e01a:function(e,t,r){"use strict";var o=r("23e7"),a=r("83ab"),n=r("da84"),c=r("5135"),i=r("861d"),s=r("9bf2").f,u=r("e893"),l=n.Symbol;if(a&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var m={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(m[t]=!0),t};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var b=p.toString,d="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=b.call(e);if(c(m,e))return"";var r=d?t.slice(7,-1):t.replace(g,"$1");return""===r?void 0:r}}),o({global:!0,forced:!0},{Symbol:f})}}}]);
//# sourceMappingURL=chunk-24570d50.ec5fb71d.js.map